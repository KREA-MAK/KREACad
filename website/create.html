<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>KreaCAD Primitive Studio</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" type="image/png" href="/assets/logos/krea_logo.png" />
<link rel="stylesheet" href="o3dv.website.min.css" />
<style>
body,html { margin:0; padding:0; height:100%; background:#0f1115; font-family: Quicksand,Helvetica,sans-serif; color:#eee; }
#studio_root { position:relative; height:100%; width:100%; overflow:hidden; }
#studio_toolbar { position:absolute; top:12px; left:12px; display:flex; gap:8px; z-index:10; }
#studio_toolbar button { background:#1d232b; border:1px solid #2e3945; color:#fff; padding:8px 14px; border-radius:6px; cursor:pointer; font-weight:600; letter-spacing:.5px; }
#studio_toolbar button:hover { background:#2b3540; }
#viewer_canvas { position:absolute; inset:0; width:100%; height:100%; outline:none; }
#ground_overlay { position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; background:radial-gradient(circle at 50% 55%, rgba(255,255,255,0.08), rgba(0,0,0,0.85)); mix-blend-mode:screen; opacity:.6; }
#param_panel { position:absolute; top:12px; right:12px; width:260px; background:rgba(20,24,30,0.85); backdrop-filter:blur(12px); border:1px solid #2e3945; border-radius:14px; padding:16px 18px 18px; box-shadow:0 10px 28px -6px rgba(0,0,0,.55); }
#param_panel h2 { margin:0 0 10px; font-size:17px; font-weight:600; letter-spacing:.5px; }
.control { margin-bottom:14px; }
.control label { display:flex; justify-content:space-between; font-size:12px; text-transform:uppercase; opacity:.85; margin-bottom:4px; font-weight:600; letter-spacing:.75px; }
.control input[type=range] { width:100%; accent-color:#3393bd; }
#primitive_bar { display:grid; grid-template-columns:repeat(auto-fill,minmax(38px,1fr)); gap:8px; margin-bottom:10px; }
.prim_icon_btn {
    width: auto;
    min-width: 38px;
    height: 34px;
    border: 1px solid #2e3945;
    border-radius: 6px;
    background: #161b22;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 600;
    color: #bcd;
    letter-spacing: .5px;
    padding: 0 12px;
    margin: 0;
    transition: background 0.15s;
}
.prim_icon_btn:hover {
    background: #222b35;
}
.prim_icon_btn.active {
    outline: 2px solid #3393bd;
    outline-offset: 2px;
}
.footer_hint { position:absolute; bottom:10px; left:50%; transform:translateX(-50%); font-size:12px; opacity:.75; letter-spacing:.5px; pointer-events:none; }
#grid_canvas { position:absolute; inset:0; width:100%; height:100%; pointer-events:none; }
.param_group_title { margin:14px 0 6px; font-size:12px; font-weight:700; opacity:.65; letter-spacing:.75px; text-transform:uppercase; }
.inline_row { display:flex; gap:6px; }
.inline_row input { flex:1; background:#12161c; border:1px solid #2e3945; padding:6px 8px; color:#d4dde7; border-radius:6px; font-size:12px; }
#generate_trefoil { margin-top:8px; width:100%; background:#2a5770; border:1px solid #34769a; padding:9px 12px; color:#fff; font-weight:600; border-radius:8px; cursor:pointer; }
#generate_trefoil:hover { background:#327193; }
.small_hint { font-size:10px; opacity:.5; margin-top:4px; }

/* Scene TreeView Panel - Glowing Transparent Menu */
#scene_treeview_panel {
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 300px;
    max-height: 400px;
    background: rgba(20, 24, 30, 0.75);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(51, 147, 189, 0.4);
    border-radius: 14px;
    padding: 12px 14px;
    box-shadow: 0 0 30px rgba(51, 147, 189, 0.3),
                0 10px 28px -6px rgba(0, 0, 0, 0.55),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
    z-index: 15;
    animation: glow-pulse 3s ease-in-out infinite;
    transition: all 0.3s ease;
}

#scene_treeview_panel:hover {
    box-shadow: 0 0 40px rgba(51, 147, 189, 0.5),
                0 10px 28px -6px rgba(0, 0, 0, 0.65),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
    border-color: rgba(51, 147, 189, 0.6);
}

@keyframes glow-pulse {
    0%, 100% {
        box-shadow: 0 0 30px rgba(51, 147, 189, 0.3),
                    0 10px 28px -6px rgba(0, 0, 0, 0.55),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    50% {
        box-shadow: 0 0 45px rgba(51, 147, 189, 0.5),
                    0 10px 28px -6px rgba(0, 0, 0, 0.55),
                    inset 0 1px 0 rgba(255, 255, 255, 0.15);
    }
}

#scene_treeview_panel .panel_header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(51, 147, 189, 0.3);
}

#scene_treeview_panel .panel_header h3 {
    margin: 0;
    font-size: 15px;
    font-weight: 600;
    letter-spacing: 0.5px;
    color: #fff;
    text-shadow: 0 0 10px rgba(51, 147, 189, 0.5);
}

#scene_treeview_panel .toggle_btn {
    background: rgba(51, 147, 189, 0.2);
    border: 1px solid rgba(51, 147, 189, 0.4);
    color: #3393bd;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    transition: all 0.2s;
}

#scene_treeview_panel .toggle_btn:hover {
    background: rgba(51, 147, 189, 0.3);
    box-shadow: 0 0 10px rgba(51, 147, 189, 0.4);
}

#scene_treeview_container {
    max-height: 350px;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 4px;
}

#scene_treeview_container::-webkit-scrollbar {
    width: 6px;
}

#scene_treeview_container::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 3px;
}

#scene_treeview_container::-webkit-scrollbar-thumb {
    background: rgba(51, 147, 189, 0.4);
    border-radius: 3px;
}

#scene_treeview_container::-webkit-scrollbar-thumb:hover {
    background: rgba(51, 147, 189, 0.6);
}

/* Enhance treeview styles for the glowing menu */
#scene_treeview_panel .ov_tree_view {
    font-size: 13px;
}

#scene_treeview_panel .ov_tree_view div.ov_tree_item {
    padding: 6px 8px;
    margin: 2px 0;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid transparent;
    transition: all 0.2s;
}

#scene_treeview_panel .ov_tree_view div.ov_tree_item.clickable:hover {
    background: rgba(51, 147, 189, 0.2);
    border-color: rgba(51, 147, 189, 0.3);
    box-shadow: 0 0 15px rgba(51, 147, 189, 0.2);
}

#scene_treeview_panel .ov_tree_view div.ov_tree_item.selected {
    background: rgba(51, 147, 189, 0.3);
    border-color: rgba(51, 147, 189, 0.5);
    box-shadow: 0 0 20px rgba(51, 147, 189, 0.4);
    font-weight: 600;
}

#scene_treeview_panel .ov_tree_view div.ov_tree_item_name {
    color: #d4dde7;
}

#scene_treeview_panel.collapsed #scene_treeview_container {
    display: none;
}

#scene_treeview_panel.collapsed {
    max-height: 50px;
}
</style>
</head>
<body>
<div id="studio_root">
    <canvas id="viewer_canvas"></canvas>
    <canvas id="grid_canvas"></canvas>
    <div id="ground_overlay"></div>
    <div id="studio_toolbar">
        <button id="back_btn" title="Back to Main">âŸµ Home</button>
        <button id="reset_cam_btn" title="Reset Camera">Reset Camera</button>
        <button id="clear_btn" title="Clear Scene">Clear</button>
        <!-- Primitives Bar (inline, same height as toolbar buttons) -->
        <div id="studio_primitives_bar" style="display:flex; align-items:center; gap:6px; margin-left:18px;">
            <button class="prim_icon_btn" data-prim="cube" title="Cube">
                <img src="assets/icons/cube.svg" alt="Cube" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="sphere" title="Sphere">
                <img src="assets/icons/sphere.svg" alt="Sphere" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="cylinder" title="Cylinder">
                <img src="assets/icons/cylinder.svg" alt="Cylinder" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="cone" title="Cone">
                <img src="assets/icons/cone.svg" alt="Cone" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="torus" title="Torus">
                <img src="assets/icons/torus.svg" alt="Torus" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="plane" title="Plane">
                <img src="assets/icons/plane.svg" alt="Plane" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="icosahedron" title="Icosahedron">
                <img src="assets/icons/icosahedron.svg" alt="Icosahedron" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="octahedron" title="Octahedron">
                <img src="assets/icons/octahedron.svg" alt="Octahedron" width="16" height="16">
            </button>
            <button class="prim_icon_btn" data-prim="trefoil" title="Trefoil Knot">
                <img src="assets/icons/trefoil.svg" alt="Trefoil" width="16" height="16">
            </button>
        </div>
    </div>
    <!-- Scene TreeView Panel - Glowing Transparent Menu -->
    <div id="scene_treeview_panel">
        <div class="panel_header">
            <h3>Scene Objects</h3>
            <button id="toggle_treeview" class="toggle_btn" title="Toggle Scene View">â–¼</button>
        </div>
        <div id="scene_treeview_container"></div>
    </div>

    <div id="param_panel">
        <h2>KreaCAD Primitive Studio</h2>
        <div class="control">
            <label><span>Metalness</span><span id="metalness_val">0.00</span></label>
            <input id="metalness_slider" type="range" min="0" max="1" step="0.01" value="0" />
        </div>
        <div class="control">
            <label><span>Roughness</span><span id="roughness_val">1.00</span></label>
            <input id="roughness_slider" type="range" min="0" max="1" step="0.01" value="1" />
        </div>
        <div class="control">
            <label><span>Opacity</span><span id="opacity_val">1.00</span></label>
            <input id="opacity_slider" type="range" min="0.05" max="1" step="0.01" value="1" />
        </div>
        <div class="param_group_title">Trefoil (Experimental)</div>
        <div class="inline_row">
            <input id="trefoil_a" type="number" step="0.1" value="2.0" title="a" placeholder="a" />
            <input id="trefoil_b" type="number" step="0.1" value="0.6" title="b" placeholder="b" />
            <input id="trefoil_q" type="number" step="1" value="3" title="q" placeholder="q" />
        </div>
        <div class="inline_row" style="margin-top:6px;">
            <input id="trefoil_tube" type="number" step="0.05" value="0.25" title="tube radius" placeholder="tube" />
            <input id="trefoil_seg_u" type="number" step="1" value="180" title="segments U" placeholder="segU" />
            <input id="trefoil_seg_v" type="number" step="1" value="24" title="segments V" placeholder="segV" />
        </div>
        <button id="generate_trefoil">Generate Trefoil</button>
        <div class="small_hint">a,b,q,tube,segU,segV parametreleri ile trefoil tÃ¼p oluÅŸturulur.</div>
    </div>
    <div class="footer_hint">WASD Move â€¢ QE Up/Down â€¢ RF Scale â€¢ TG Rotate â€¢ C Color â€¢ ESC Deselect</div>
</div>

       <!-- KreaCAD Primitives Bar -->
        <div class="primitives_bar" id="primitives_bar" style="display: none;">
            <div class="primitives_title">Primitives</div>
            <div class="primitives_icons">
                <div class="primitive_icon" data-primitive="cube" title="Cube">
                    <div class="icon_shape cube_icon">â¬›</div>
                </div>
                <div class="primitive_icon" data-primitive="sphere" title="Sphere">
                    <div class="icon_shape sphere_icon">âš«</div>
                </div>
                <div class="primitive_icon" data-primitive="cylinder" title="Cylinder">
                    <div class="icon_shape cylinder_icon">ðŸŸ«</div>
                </div>
                <div class="primitive_icon" data-primitive="cone" title="Cone">
                    <div class="icon_shape cone_icon">ðŸ”º</div>
                </div>
                <div class="primitive_icon" data-primitive="torus" title="Torus">
                    <div class="icon_shape torus_icon">â­•</div>
                </div>
                <div class="primitive_icon" data-primitive="plane" title="Plane">
                    <div class="icon_shape plane_icon">â¬œ</div>
                </div>
                <div class="primitive_icon" data-primitive="icosahedron" title="Icosahedron">
                    <div class="icon_shape icosahedron_icon">ðŸ’Ž</div>
                </div>
                <div class="primitive_icon" data-primitive="octahedron" title="Octahedron">
                    <div class="icon_shape octahedron_icon">â™¦</div>
                </div>
            </div>
        </div>

<script src="o3dv.website.min.js"></script>
<script src="./studio.js"></script>
</body>
</html>
